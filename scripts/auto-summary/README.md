# è‡ªåŠ¨ç¬”è®°æ‘˜è¦ç³»ç»Ÿ

è‡ªåŠ¨ç›‘æŽ§ç¬”è®°ç›®å½•ä¸­çš„æ–°å¢žæ–‡ä»¶ï¼Œè°ƒç”¨ChatGLM4.5ç”Ÿæˆæ‘˜è¦ï¼Œå¹¶æ›´æ–°ç¬”è®°é¦–é¡µå±•ç¤ºæœ€æ–°10ç¯‡ç¬”è®°ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ðŸ” **è‡ªåŠ¨ç›‘æŽ§**ï¼šå®žæ—¶ç›‘æŽ§ç¬”è®°ç›®å½•ä¸­çš„æ–‡ä»¶å˜åŒ–
- ðŸ¤– **AIæ‘˜è¦**ï¼šè°ƒç”¨ChatGLM4.5ç”Ÿæˆé«˜è´¨é‡æ‘˜è¦
- ðŸ“ **åŠ¨æ€æ›´æ–°**ï¼šè‡ªåŠ¨æ›´æ–°ç¬”è®°é¦–é¡µï¼Œä¿æŒæœ€æ–°10ç¯‡æ‘˜è¦
- ðŸ›¡ï¸ **é”™è¯¯å¤„ç†**ï¼šå®Œæ•´çš„é”™è¯¯å¤„ç†å’Œé‡è¯•æœºåˆ¶
- ðŸ“Š **æ—¥å¿—è®°å½•**ï¼šè¯¦ç»†çš„è¿è¡Œæ—¥å¿—å’Œç›‘æŽ§ä¿¡æ¯

## å¿«é€Ÿå¼€å§‹

### 1. é…ç½®APIå¯†é’¥

åœ¨çŽ¯å¢ƒå˜é‡ä¸­è®¾ç½®ChatGLM APIå¯†é’¥ï¼š

```bash
export GLM_API_KEY="your-api-key-here"
# æˆ–è€…
export CHATGLM_API_KEY="your-api-key-here"
```

æˆ–è€…ç›´æŽ¥ä¿®æ”¹é…ç½®æ–‡ä»¶ `config/default.json`ï¼š

```json
{
  "chatglm": {
    "apiKey": "your-api-key-here"
  }
}
```

### 2. å®‰è£…ä¾èµ–

```bash
npm install winston
```

### 3. å¯åŠ¨ç³»ç»Ÿ

```bash
# å¼€å‘æ¨¡å¼
npm run auto-summary:dev

# ç”Ÿäº§æ¨¡å¼  
npm run auto-summary:prod

# æˆ–ç›´æŽ¥è¿è¡Œ
npm run auto-summary
```

## é…ç½®è¯´æ˜Ž

### é»˜è®¤é…ç½® (config/default.json)

```json
{
  "chatglm": {
    "apiKey": "",                    // ChatGLM APIå¯†é’¥
    "endpoint": "https://open.bigmodel.cn/api/paas/v4/chat/completions",
    "model": "glm-4-plus",          // ä½¿ç”¨çš„æ¨¡åž‹
    "maxTokens": 1000,              // æœ€å¤§tokenæ•°
    "temperature": 0.7,             // æ¸©åº¦å‚æ•°
    "timeout": 30000,               // è¶…æ—¶æ—¶é—´(ms)
    "retryAttempts": 3              // é‡è¯•æ¬¡æ•°
  },
  "monitoring": {
    "watchPaths": ["ç¬”è®°"],         // ç›‘æŽ§çš„ç›®å½•
    "ignorePatterns": [             // å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼
      "**/.obsidian/**",
      "**/node_modules/**",
      "**/.git/**",
      "**/index.md"
    ],
    "debounceMs": 2000              // é˜²æŠ–å»¶è¿Ÿ(ms)
  },
  "content": {
    "maxSummaries": 10,             // æœ€å¤§æ‘˜è¦æ•°é‡
    "summaryLength": 100,           // æ‘˜è¦é•¿åº¦
    "indexFilePath": "ç¬”è®°/index.md" // ç´¢å¼•æ–‡ä»¶è·¯å¾„
  },
  "logging": {
    "level": "info",                // æ—¥å¿—çº§åˆ«
    "file": "logs/auto-summary.log", // æ—¥å¿—æ–‡ä»¶
    "maxSize": "10m",               // æœ€å¤§æ–‡ä»¶å¤§å°
    "maxFiles": 5                   // æœ€å¤§æ–‡ä»¶æ•°é‡
  }
}
```

### çŽ¯å¢ƒå˜é‡è¦†ç›–

- `GLM_API_KEY` æˆ– `CHATGLM_API_KEY`: ChatGLM APIå¯†é’¥
- `CHATGLM_ENDPOINT`: APIç«¯ç‚¹åœ°å€
- `LOG_LEVEL`: æ—¥å¿—çº§åˆ« (debug, info, warn, error)
- `NODE_ENV`: è¿è¡ŒçŽ¯å¢ƒ (development, production)

## ç›®å½•ç»“æž„

```
scripts/auto-summary/
â”œâ”€â”€ index.js                 # ä¸»å…¥å£æ–‡ä»¶
â”œâ”€â”€ config/                  # é…ç½®æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ default.json        # é»˜è®¤é…ç½®
â”‚   â””â”€â”€ production.json     # ç”Ÿäº§çŽ¯å¢ƒé…ç½®
â”œâ”€â”€ modules/                 # æ ¸å¿ƒæ¨¡å—
â”‚   â””â”€â”€ configManager.js    # é…ç½®ç®¡ç†æ¨¡å—
â”œâ”€â”€ utils/                   # å·¥å…·ç±»
â”‚   â””â”€â”€ logger.js           # æ—¥å¿—å·¥å…·
â””â”€â”€ README.md               # è¯´æ˜Žæ–‡æ¡£
```

## å¼€å‘çŠ¶æ€

å½“å‰å·²å®Œæˆï¼š
- âœ… é¡¹ç›®ç»“æž„æ­å»º
- âœ… é…ç½®ç®¡ç†ç³»ç»Ÿ
- âœ… æ—¥å¿—è®°å½•ç³»ç»Ÿ
- âœ… åŸºç¡€å¯åŠ¨æ¡†æž¶

å¾…å¼€å‘åŠŸèƒ½ï¼š
- â³ æ–‡ä»¶ç›‘æŽ§æ¨¡å—
- â³ ChatGLM APIé›†æˆ
- â³ æ‘˜è¦ç”Ÿæˆé€»è¾‘
- â³ å†…å®¹ç®¡ç†æ¨¡å—
- â³ é”™è¯¯å¤„ç†æœºåˆ¶

## æ•…éšœæŽ’é™¤

### å¸¸è§é—®é¢˜

1. **APIå¯†é’¥æœªé…ç½®**
   - ç¡®ä¿è®¾ç½®äº† `CHATGLM_API_KEY` çŽ¯å¢ƒå˜é‡
   - æˆ–åœ¨é…ç½®æ–‡ä»¶ä¸­å¡«å†™æ­£ç¡®çš„APIå¯†é’¥

2. **æƒé™é”™è¯¯**
   - ç¡®ä¿æœ‰è¯»å†™ç¬”è®°ç›®å½•çš„æƒé™
   - æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ç›®å½•çš„å†™å…¥æƒé™

3. **ä¾èµ–ç¼ºå¤±**
   - è¿è¡Œ `npm install` å®‰è£…æ‰€æœ‰ä¾èµ–
   - ç¡®ä¿Node.jsç‰ˆæœ¬ >= 14

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹å®žæ—¶æ—¥å¿—
tail -f logs/auto-summary.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
grep ERROR logs/auto-summary.log
```